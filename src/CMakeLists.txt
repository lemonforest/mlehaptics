# EMDR Bilateral Stimulation Device - Main Component
# Component-level CMakeLists.txt for ESP-IDF
#
# This tells ESP-IDF how to build the src/ directory
# Modular architecture with separate task and hardware modules
# AUTO-GENERATED by scripts/select_source.py - DO NOT EDIT MANUALLY

idf_component_register(
    SRCS
        # Main application entry point
        "main.c"

        # Task modules (state machines)
        "motor_task.c"
        "ble_task.c"
        "button_task.c"

        # Hardware control modules
        "battery_monitor.c"
        "motor_control.c"
        "led_control.c"
        "status_led.c"

        # System modules
        "ble_manager.c"
        "nvs_manager.c"
        "power_manager.c"

        # Command-and-Control modules (AD028)
        "command_protocol.c"
        "role_manager.c"

    INCLUDE_DIRS
        "."

    REQUIRES
        # FreeRTOS and ESP system
        freertos
        esp_system
        esp_common
        esp_timer

        # Hardware drivers
        driver          # GPIO, LEDC, ADC, RMT

        # Storage
        nvs_flash

        # Bluetooth
        bt              # NimBLE stack

        # Power management
        esp_pm

        # LED strip encoder (for WS2812B)
        led_strip
)
